(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),i=c(28),r=c.n(i),s=c(6),l=c(2),o=c(0),j=function(e){var t=e.to,c=e.children;return Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(s.c,{to:t,activeClassName:"active",isActive:function(e,t){return!(!e||!e.isExact)},children:c})})},d=c(10),u=c(4),b=c(13),h=function(e,t){switch(t.type){case"ADD_ITEM":var c=t.payload._id;return Object(d.a)(Object(d.a)({},e),{},Object(b.a)({},c,Object(d.a)({},t.payload)));case"CHANGE_ITEM":var n=t.payload,a=n._id;if(n.inCart>0)return Object(d.a)(Object(d.a)({},e),{},Object(b.a)({},a,t.payload));case"DELETE_ITEM":var i=t.payload._id,r=Object(d.a)({},e);return delete r[i],r;case"CLEAR_CART":return{};default:return e}},O=Object(n.createContext)({state:{},howManyItemsInCart:function(){return 0},clearCart:function(){},setItemInCart:function(){}}),m=O.Provider,x=function(e){var t=e.children,c=Object(n.useReducer)(h,{}),a=Object(u.a)(c,2),i=a[0],r=a[1];return Object(o.jsx)(m,{value:{state:i,howManyItemsInCart:function(){var e=0;return Object.values(i).forEach((function(t){e+=t.inCart})),e},clearCart:function(){r({type:"CLEAR_CART"})},setItemInCart:function(e,t){var c=Object(d.a)(Object(d.a)({},e),{},{inCart:t});r({type:"CHANGE_ITEM",payload:c})}},children:t})},v=(c(40),function(){var e=Object(n.useContext)(O).howManyItemsInCart;return Object(o.jsxs)("nav",{children:[Object(o.jsx)("div",{className:"nav-logo",children:Object(o.jsx)(s.b,{to:"/",children:" Super Store "})}),Object(o.jsxs)("ul",{className:"nav-list",children:[Object(o.jsx)(j,{to:"/",children:"Home"}),Object(o.jsx)(j,{to:"/deals",children:"Deals"}),Object(o.jsx)(j,{to:"/cart",children:"Cart"}),Object(o.jsx)("div",{className:"total-pill",children:e()})]})]})}),f=c.p+"static/media/close.2f933107.svg",p=c.p+"static/media/search.0893e664.svg",g=(c(41),function(e){var t=e.handleSearch,c=Object(n.useState)(""),a=Object(u.a)(c,2),i=a[0],r=a[1],s=Object(n.useCallback)((function(){r(""),t("")}),[t]);return Object(o.jsxs)("div",{className:"search-container",children:[Object(o.jsx)("input",{id:"search-input",type:"text",placeholder:"Search",value:i,onChange:function(e){return r(e.target.value)},onKeyDownCapture:function(e){if("Escape"===e.key)return s()}}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"clear-search",onClick:s,children:Object(o.jsx)("img",{src:f,alt:"Clear search"})})}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"submit-search",onClick:function(){return t(i)},children:Object(o.jsx)("img",{src:p,alt:"Submit Search"})})})]})}),N=c.p+"static/media/star_full.b2f16a7f.svg",C=c.p+"static/media/star-half.93a2deb1.svg",y=c.p+"static/media/star-empty.c280f536.svg",w=function(e){var t=e.rating;return Object(o.jsx)("div",{className:"item-rating",children:function(){var e=[];if(t%1===0)for(var c=0;c<5;c++)c<t?e.push(N):e.push(y);else for(var n=Math.floor(t),a=0;a<5;a++)a<n?e.push(N):a===n?e.push(C):e.push(y);return e}().map((function(e,t){return Object(o.jsx)("div",{className:"svg-container",children:Object(o.jsx)("img",{src:e,alt:""})},t)}))})},k=(c(42),function(e){var t=e.align,c=e.variant,n=e.children;return Object(o.jsx)("div",{className:"button-container ".concat(t?"align-".concat(t):""," ").concat(c||""),children:Object(o.jsx)("div",{children:n})})}),S=(c(43),function(e){var t=e.leadingText,c=e.price,n=e.isOnSale,a=c.toLocaleString(void 0,{currency:"USD",currencyDisplay:"narrowSymbol",style:"currency"});return Object(o.jsxs)("div",{className:"item-price",children:[t?t+" ":null,a+" ",n?Object(o.jsx)("span",{className:"on-sale",children:"On Sale"}):null]})}),I=(c(44),function(e){var t=e.item;t.price.toLocaleString(void 0,{currency:"USD",currencyDisplay:"narrowSymbol",style:"currency"});return Object(o.jsxs)("div",{className:"item-card-container",children:[Object(o.jsx)("div",{className:"item-image-wrapper",children:Object(o.jsx)("img",{className:"img-contain",src:t.imageUrl,alt:t.name})}),Object(o.jsxs)("div",{className:"item-details",children:[Object(o.jsx)("div",{className:"item-name",children:Object(o.jsx)(s.b,{to:"/item/".concat(t._id),children:t.name})}),Object(o.jsx)(w,{rating:t.avgRating}),Object(o.jsx)(S,{price:t.price,isOnSale:t.isOnSale})]}),Object(o.jsx)(k,{children:Object(o.jsx)(s.b,{to:"/item/".concat(t._id),children:"View Item"})})]})}),L=(c(45),function(e){var t=e.itemsList;return Object(o.jsx)("div",{className:"items-container",children:t.map((function(e){return Object(o.jsx)(I,{item:e},e._id)}))})}),T=(c(46),function(e){var t=e.handlePage,c=e.page,n=e.isFirst,a=e.isLast;return n&&a?Object(o.jsx)("div",{}):Object(o.jsxs)("div",{className:"page-controller-container row",children:[n?Object(o.jsx)("div",{className:"page-input-group row justify-center",children:"\xa0"}):Object(o.jsxs)("div",{className:"page-input-group row justify-center",children:[Object(o.jsx)("button",{"data-value":"FIRST",onClick:t,children:"First"}),Object(o.jsx)("button",{"data-value":-1,onClick:t,children:"<"})]}),Object(o.jsx)("div",{className:"page-input-group",children:c+1}),a?Object(o.jsx)("div",{className:"page-input-group row justify-center",children:"\xa0"}):Object(o.jsxs)("div",{className:"page-input-group row justify-center",children:[Object(o.jsx)("button",{"data-value":1,onClick:t,children:">"}),Object(o.jsx)("button",{"data-value":"LAST",onClick:t,children:"Last"})]})]})}),E=c(18),A=c.n(E),M=function(e){return A.a.get("https://gp-super-store-api.herokuapp.com/item/list",{params:e})},_=function(e){return A.a.get("https://gp-super-store-api.herokuapp.com/item/".concat(e))},F=function(e,t,c){var a=Object(n.useState)(void 0),i=Object(u.a)(a,2),r=i[0],s=i[1],l=Object(n.useState)(!0),o=Object(u.a)(l,2),j=o[0],d=o[1];return Object(n.useEffect)((function(){console.log("firing"),M({page:e,isOnSale:t,q:c,from:6*e,size:6}).then((function(e){s(e.data)})).catch((function(e){return console.log(e)})).finally((function(){return d(!1)}))}),[e,t,c]),{data:r,isLoading:j}},R=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(0),r=Object(u.a)(i,2),s=r[0],l=r[1],j=F(s,void 0,c),d=j.data,b=j.isLoading;if(d&&!b){var h=d.items,O=d.hasMore,m=d.total;return Object(o.jsxs)("div",{className:"page-wrapper",id:"Home",children:[Object(o.jsx)(g,{handleSearch:function(e){a(e)}}),Object(o.jsx)("div",{className:"content",children:h.length>0?Object(o.jsx)(L,{itemsList:h}):Object(o.jsx)("h2",{className:"center-text",children:"No results"})}),Object(o.jsx)(T,{handlePage:function(e){switch(e.currentTarget.getAttribute("data-value")){case"-1":l(s-1);break;case"1":l(s+1);break;case"FIRST":l(0);break;case"LAST":l(Math.floor(m/6));break;default:throw new Error("Pagination mishandled")}window.scrollTo(0,0)},page:s,isLast:!O,isFirst:s<1})]})}return d||!1!==b?Object(o.jsx)("h2",{className:"center-text",children:"Loading"}):Object(o.jsx)("h2",{className:"center-text",children:"Oops, looks like something went wrong"})},D=(c(65),function(e){var t=e.handleChange,c=e.value;return Object(o.jsx)("div",{className:"quantity-select-container",children:Object(o.jsxs)("form",{children:[Object(o.jsx)("label",{htmlFor:"quantity",children:" Quantity: "}),Object(o.jsx)("input",{value:c,min:0,onChange:function(e){console.log(e),t(parseInt(e.currentTarget.value))},name:"quantity",type:"number"})]})})}),P=(c(66),function(e){var t=e.dispatch,c=e.cartEntry,n=function(e){if(0===e){window.confirm("Are you sure you want to remove this item from your cart?")&&t(c,0)}else e>c.stockCount||t(c,e)};return console.log(c),Object(o.jsxs)("div",{className:"cart-item-container row",children:[Object(o.jsx)("div",{className:"cart-item-image image-container",children:Object(o.jsx)("img",{src:c.imageUrl,alt:c.name})}),Object(o.jsxs)("div",{className:"cart-item-controls col",children:[Object(o.jsx)("div",{className:"cart-item-name",children:Object(o.jsx)("h4",{children:c.name})}),Object(o.jsxs)("div",{className:"inputs-container row",children:[Object(o.jsx)("div",{className:"quantity-container row",children:Object(o.jsx)(D,{value:c.inCart,handleChange:n})}),Object(o.jsx)("div",{className:"remove-container",children:Object(o.jsx)(k,{variant:"danger",children:Object(o.jsx)("button",{onClick:function(){n(0)},children:"Remove"})})}),Object(o.jsx)("div",{className:"remove-mobile-container",children:Object(o.jsx)(k,{variant:"danger",children:Object(o.jsx)("button",{onClick:function(){n(0)},children:"X"})})})]})]}),Object(o.jsx)(S,{price:c.price})]})}),U=(c(67),function(){var e=Object(l.f)(),t=Object(n.useContext)(O),c=t.state,a=t.setItemInCart,i=t.clearCart,r=Object.keys(c),s=function(){var e=0;return r.forEach((function(t){e+=c[t].price*c[t].inCart})),e}();if(r.length<1)return Object(o.jsx)("div",{className:"page-wrapper",id:"Cart",children:Object(o.jsx)("div",{className:"content",children:Object(o.jsx)("h1",{className:"center-text",children:"Your Cart is empty"})})});return Object(o.jsx)("div",{className:"page-wrapper",id:"Cart",children:Object(o.jsxs)("div",{className:"content",children:[Object(o.jsx)("div",{className:"page-title",children:Object(o.jsx)("h1",{children:"Shopping Cart"})}),Object(o.jsx)("div",{className:"in-cart",children:r.map((function(e){return Object(o.jsx)(P,{dispatch:a,cartEntry:c[e]},e)}))}),Object(o.jsxs)("div",{className:"checkout row",children:[Object(o.jsx)(k,{align:"left",children:Object(o.jsxs)("button",{onClick:function(){i(),e.push("checkout")},className:"checkout-button",children:[" ","Checkout"," "]})}),Object(o.jsx)("div",{className:"total",children:Object(o.jsx)(S,{leadingText:"Total: ",price:s})})]})]})})}),q=function(){var e=Object(n.useState)(0),t=Object(u.a)(e,2),c=t[0],a=t[1],i=F(c,!0),r=i.data,s=i.isLoading;if(r&&!s){var l=r.items,j=r.hasMore,d=r.total;return Object(o.jsxs)("div",{className:"page-wrapper",id:"Deals",children:[Object(o.jsx)("div",{className:"content",children:l.length>0?Object(o.jsx)(L,{itemsList:l}):Object(o.jsx)("h2",{className:"center-text",children:"No results"})}),Object(o.jsx)(T,{handlePage:function(e){switch(e.currentTarget.getAttribute("data-value")){case"-1":a(c-1);break;case"1":a(c+1);break;case"FIRST":a(0);break;case"LAST":a(Math.floor(d/6));break;default:throw new Error("Pagination mishandled")}window.scrollTo(0,0)},page:c,isLast:!j,isFirst:c<1})]})}return r||!1!==s?Object(o.jsx)("h2",{className:"center-text",children:"Loading"}):Object(o.jsx)("h2",{className:"center-text",children:"Oops, looks like something went wrong"})},H=(c(68),function(e){var t=e.inCart,c=e.insufficient;return Object(o.jsxs)("div",{className:"error-container",children:[t>0?Object(o.jsxs)("div",{className:"error in-cart",children:[t," of this item is currently in your cart"]}):null,c?Object(o.jsx)("div",{className:"error insufficient",children:"Insufficient stock"}):null]})}),B=function(e){var t=Object(n.useState)(void 0),c=Object(u.a)(t,2),a=c[0],i=c[1],r=Object(n.useState)(!0),s=Object(u.a)(r,2),l=s[0],o=s[1];return Object(n.useEffect)((function(){_(e).then((function(e){var t=e.data;console.log(t),i(t)})).catch((function(e){console.log(e)})).finally((function(){return o(!1)}))}),[e]),{item:a,isLoading:l}},G=(c(69),function(){var e=Object(l.g)(),t=B(e.id),c=t.item,a=t.isLoading,i=Object(n.useState)(0),r=Object(u.a)(i,2),s=r[0],j=r[1],d=Object(n.useState)(!1),b=Object(u.a)(d,2),h=b[0],m=b[1],x=Object(n.useContext)(O),v=x.state,f=x.setItemInCart,p=v[e.id]?v[e.id].inCart:0;if(console.log(c),a||void 0===c)return c||!1!==a?Object(o.jsx)("h2",{className:"center-text",children:" Loading "}):Object(o.jsx)("h2",{className:"center-text",children:" Sorry, we couldn't find that item "});return Object(o.jsx)("div",{className:"page-wrapper",id:"ItemPage",children:Object(o.jsx)("div",{className:"item-wrapper",children:Object(o.jsxs)("div",{className:"item-container",children:[Object(o.jsx)("div",{className:"image-container",children:Object(o.jsx)("img",{src:c.imageUrl,alt:c.name})}),Object(o.jsxs)("div",{className:"description-container",children:[Object(o.jsx)("div",{className:"item-name",children:c.name}),Object(o.jsx)("div",{className:"item-rating",children:Object(o.jsx)(w,{rating:c.avgRating})}),Object(o.jsx)("div",{className:"item-description",children:c.description}),Object(o.jsx)(S,{price:c.price}),Object(o.jsx)(D,{handleChange:function(e){e>c.stockCount?m(!0):(m(!1),j(e))},value:s}),Object(o.jsx)(k,{align:"left",children:Object(o.jsx)("button",{onClick:function(){s>c.stockCount?m(!0):f(c,s)},className:"item-add",children:0===p?"Add to Cart":"Update Cart"})}),Object(o.jsx)(H,{inCart:p,insufficient:h})]})]})})})}),J=function(){return Object(o.jsxs)("div",{className:"page-wrapper",id:"Checkout",children:[Object(o.jsx)("h1",{className:"center-text",children:"Thank you for shopping at Super Store!"}),Object(o.jsx)(k,{children:Object(o.jsx)(s.b,{to:"/home",children:" Return Home "})})]})},z=(c(70),function(){return Object(o.jsx)(s.a,{children:Object(o.jsxs)(x,{children:[Object(o.jsx)(v,{}),Object(o.jsxs)(l.c,{children:[Object(o.jsx)(l.a,{exact:!0,path:"/",children:Object(o.jsx)(R,{})}),Object(o.jsx)(l.a,{path:"/cart",children:Object(o.jsx)(U,{})}),Object(o.jsx)(l.a,{path:"/deals",children:Object(o.jsx)(q,{})}),Object(o.jsx)(l.a,{path:"/item/:id",children:Object(o.jsx)(G,{})}),Object(o.jsx)(l.a,{path:"/checkout",children:Object(o.jsx)(J,{})})]})]})})}),K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,72)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),i(e),r(e)}))};r.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(z,{})}),document.getElementById("root")),K()}},[[71,1,2]]]);
//# sourceMappingURL=main.46f104c2.chunk.js.map